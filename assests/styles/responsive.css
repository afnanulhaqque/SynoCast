/* Responsive Design Stylesheet */

/* =========================================
   1. Date/Time Information Section
   ========================================= */
@media screen and (max-width: 1200px) {
  .date_time_info span {
    left: 20px !important; /* Reset large left margin */
  }
}

@media screen and (max-width: 768px) {
  .date_time_info {
    text-align: center;
    padding: 5px 0;
  }

  .date_time_info span {
    left: 0 !important;
    font-size: 11px; /* Smaller font */
    display: block;
    width: 100%;
    padding: 0 10px;
    white-space: normal; /* Allow wrapping if needed, prevents horizontal scroll */
    line-height: 1.4;
  }
}

/* =========================================
   2. Chatbot Component
   ========================================= */
@media screen and (max-width: 768px) {
  /* Ensure floating button doesn't block content */
  .floating-chat-btn-container {
    bottom: 20px;
    right: 20px;
    z-index: 1040;
  }

  .floating-chat-btn {
    width: 50px;
    height: 50px;
  }

  .floating-chat-icon {
    width: 24px;
    height: 24px;
  }

  /* Chatbot Modal - Mobile Fixes */
  .chatbot-modal-dialog {
    width: 90% !important; /* Not full width */
    max-width: 380px !important;
    height: 60vh !important; /* Not full height, preserve context */
    max-height: 600px !important;
    margin: 0 !important;
    position: fixed !important;
    bottom: 80px !important; /* Position above floating button */
    right: 5% !important; /* Center horizontally or align right with gap */
    left: auto !important;
    border-radius: 20px !important;
    transition: transform 0.3s ease-out;
  }

  /* Adjust right alignment calculation if needed or use left: 50% + translateX */
  @media (min-width: 400px) {
    .chatbot-modal-dialog {
      right: 20px !important;
    }
  }

  .chatbot-modal-dialog .modal-content {
    height: 100%;
    border-radius: 20px !important;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  }
}

@media screen and (max-width: 320px) {
  /* Extra small devices adjustments */
  .chatbot-modal-dialog .modal-header {
    padding: 10px;
  }

  .chatbot-modal-dialog .modal-title {
    font-size: 1rem;
  }

  .chatbot-modal-dialog {
    width: 95% !important;
    right: 2.5% !important;
  }
}

/* =========================================
   2.5 Map Control Visibility Fix
   ========================================= */
@media screen and (max-width: 768px) {
  /* Map Controls - Reposition below weather overlay */
  /* Map Controls - Reposition to bottom left for short/mobile devices */
  .map-controls {
    left: 20px !important;
    right: auto !important;
    top: auto !important;
    bottom: 20px !important;
    flex-direction: column-reverse; /* Stack upwards */
    align-items: flex-start;
  }

  .search-box {
    width: 180px; /* Slightly smaller */
  }

  /* Ensure clear separation */
  .weather-overlay {
    /* Ensure it stays at top right */
    right: 20px;
    top: 20px;
    max-width: 200px; /* Limit width */
  }
}

/* =========================================
   3. Home Page - Latest News Section
   ========================================= */
/* Tablet Breakpoint (max-width: 1024px) */
@media screen and (max-width: 1024px) {
  .container {
    padding-left: 20px;
    padding-right: 20px;
  }

  .navbar-collapse {
    background-color: #fefaf9;
    padding: 1rem;
    z-index: 1000;
    border-top: 1px solid rgba(0, 0, 0, 0.05);
  }

  /* News Sub Banner Layout */
  .news_sub_banner .card-body .row,
  .breaking_news_section .card-body .row,
  .featured_news_section .card-body .row {
    flex-wrap: wrap; /* Allow wrapping */
  }
}

/* Mobile Breakpoint (max-width: 768px) */
@media screen and (max-width: 768px) {
  /* Layout Adjustments */
  .row > * {
    margin-bottom: 20px;
  }

  /* Typography */
  h1,
  .display-3 {
    font-size: 2.5rem;
  }

  h2,
  .display-4 {
    font-size: 2rem;
  }

  /* Footer Adjustments */
  .footer_item {
    margin-bottom: 15px;
  }

  /* Latest News Section - Main Columns Stacking */
  .news_sub_banner > .row:nth-child(2) > .col-6 {
    width: 100% !important;
    max-width: 100% !important;
    flex: 0 0 100% !important;
  }

  /* News Cards Internal Layout - Mobile */
  .news_sub_banner .card-body .row,
  .breaking_news_section .card-body .row,
  .featured_news_section .card-body .row {
    flex-direction: column !important; /* Stack Text and Image */
    display: flex !important;
  }

  /* Reset width for internal items (Text col and Image col) */
  .news_sub_banner .card-body .row > *,
  .breaking_news_section .card-body .row > *,
  .featured_news_section .card-body .row > * {
    width: 100% !important;
    max-width: 100% !important;
    flex: 0 0 100% !important;
    margin-bottom: 10px;
  }

  /* Order adjustment: Image on top for small cards if desired, or keep default */
  /* Current HTML has text (col-7) then image (col-5). 
     flex-direction: column puts text on top. 
     If we want image on top: flex-direction: column-reverse 
  */

  /* Specific styling for the thumbnail images in the small cards */
  .news_sub_banner .col-5 img,
  .breaking_news_section .col-5 img {
    height: 180px; /* Fixed height for consistency */
    width: 100%;
    object-fit: cover;
  }

  /* Adjust the main featured image in right col if needed */
  .news_sub_banner > .row > .col-6:first-child .card img {
    height: auto;
    max-height: 300px;
    object-fit: cover;
  }

  /* Specific overrides for flex items */
  .col-lg-6.d-flex.flex-column.align-items-end {
    align-items: center !important;
  }

  /* Weather Page Adjustments */
  .weather-hero-card .display-1 {
    font-size: 4rem;
  }

  .weather-hero-card .display-5 {
    font-size: 2rem;
  }
}

/* Small Mobile Breakpoint */
@media screen and (max-width: 320px) {
  .sub_heading {
    font-size: 1.1rem !important;
  }

  .card-title {
    font-size: 1rem;
  }

  .card-text {
    font-size: 0.85rem;
  }
}

/* =========================================
   4. Banner Optimization
   ========================================= */

/* Desktop / Large Screens */
@media screen and (min-width: 1025px) {
  .banner_image {
    max-height: 500px; /* Reduced max height */
  }
}

/* Tablet Breakpoint (max-width: 1024px) */
@media screen and (max-width: 1024px) {
  .banner_image {
    min-height: 350px;
    max-height: 450px;
  }

  .banner_image_text {
    width: 80% !important;
    left: 10% !important;
    top: 25% !important;
  }
}

/* Mobile Breakpoint (max-width: 768px) */
@media screen and (max-width: 768px) {
  .banner_image {
    min-height: 250px;
    max-height: 350px;
  }

  .banner_image_text {
    width: 95% !important;
    left: 2.5% !important;
    top: 50% !important;
    transform: translateY(-50%); /* Center vertically */
    text-align: center;
    display: block; /* Override grid if used */
    height: auto;
  }

  .banner_image_text_news {
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    top: 50% !important;
    bottom: auto !important;
  }

  .home_banner_2.sub_heading,
  .home_banner_2 .sub_heading_2 {
    font-size: 1.2rem;
  }
}

/* Small Mobile Breakpoint (max-width: 320px) */
@media screen and (max-width: 320px) {
  .banner_image {
    min-height: 200px;
    max-height: 280px;
  }

  .banner_image_text h1 {
    font-size: 1.5rem;
  }

  .banner_image_text p {
    font-size: 0.9rem;
    display: none; /* Hide description on very small screens if too cluttered */
  }
}

/* =========================================
   5. Short Device Optimization (Height <= 667px)
   ========================================= */
@media screen and (max-height: 667px) {
  /* Standardize banner heights */
  .home-banner-container {
    height: 380px !important;
  }

  .banner_image {
    min-height: 200px;
    max-height: 280px;
  }

  /* Adjust Home Page Content Position */
  .container.position-relative[style*="margin-top: -250px"] {
    margin-top: -150px !important;
  }

  .col-lg-6[style*="padding-top: 280px"] {
    padding-top: 150px !important;
  }

  /* Ensure modal fits on screen */
  .chatbot-modal-dialog {
    max-height: 80vh !important;
    bottom: 70px !important;
  }

  /* Keyboard Fix - Body class generic handler if needed */
  body.keyboard-open .footer,
  body.keyboard-open .floating-chat-btn-container {
    display: none !important;
  }
}
