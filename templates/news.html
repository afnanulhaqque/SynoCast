{% extends "base.html" %} {% block title %} News {% endblock title %} {% block
body %}

<div class="position-relative">
  <img src="/assests/images/banner-news.png" class="img-fluid banner_image" alt="Banner" />
  <div
    class="position-absolute bottom-0 start-50 translate-middle-x text-white banner-subtitle banner_image_text banner_image_text_news">
    <h1 class="fw-bold lh-1">WeatherTrip<span class="fs-6">.news</span></h1>
    <p class="fw-normal fs-4">
      Your guide to weather: Accurate forecasts, storm warnings, tips for
      preparing and more.
    </p>
  </div>
</div>

<div class="container text-center mt-5 news_sub_banner">
  <div class="row justify-content-md-center">
    {% if breaking_news %}
    <div class="col-8">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">{{ breaking_news[0].title }}</h5>
          <p class="card-text">{{ breaking_news[0].description[:300] }}{% if breaking_news[0].description|length > 300
            %}...{% endif %}</p>
          <div class="row mt-2 mb-2">
            <div class="col-6 text-start">
              <span class="grey_color fs-7">{{ breaking_news[0].author if breaking_news[0].author else 'News Desk'
                }}</span>
            </div>
            <div class="col-6 text-end">
              <a href="{{ breaking_news[0].url }}" target="_blank" class="card-link">Article link</a>
            </div>
          </div>
        </div>
        <img
          src="{{ breaking_news[0].urlToImage if breaking_news[0].urlToImage else '/assests/images/sub-banner-news.png' }}"
          class="card-img-top" alt="Featured News" style="height: 400px; object-fit: cover;">
      </div>

    </div>
    <div class="col-4">
      {% for article in breaking_news[1:] %}
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title fs-6">{{ article.title }}</h5>
          <p class="card-text small">{{ article.description[:100] }}...</p>
          <a href="{{ article.url }}" target="_blank" class="card-link small">Article link</a>
        </div>
      </div>
      {% endfor %}
      {% if breaking_news|length < 3 %} <!-- Placeholder if not enough breaking news -->
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">More News Coming Soon</h5>
            <p class="card-text small">Stay tuned for more weather updates from around the globe.</p>
          </div>
        </div>
        {% endif %}
    </div>
    {% else %}
    <div class="col-12">
      <p class="text-muted">Loading weather news...</p>
    </div>
    {% endif %}
  </div>
</div>

<div class="container mt-3 breaking_news_section">
  <div>
    <span class="sub_heading fw-bold">Breaking News</span>
  </div>

  <div class="text-center mt-5">
    <div class="row justify-content-md-center">
      {% if breaking_news %}
      {% for article in breaking_news %}
      <div class="col-4">
        <div class="card h-100">
          <img
            src="{{ article.urlToImage if article.urlToImage else '/assests/images/breaking-news-' ~ loop.index ~ '.png' }}"
            class="card-img-top" alt="{{ article.title }}" style="height: 200px; object-fit: cover;">
          <div class="card-body">
            <div class="row mt-1 mb-2">
              <div class="col-6 text-start">
                <span class="grey_color fs-7">{{ article.publishedAt[:10] }}</span>
              </div>
              <div class="col-6 text-start fw-semibold">
                <span class="fs-7">{{ article.source.name[:15] }}</span>
              </div>
            </div>
            <div class="text-start">
              <h6 class="fw-bold">{{ article.title[:60] }}...</h6>
              <p class="card-text small">{{ article.description[:120] }}...</p>
            </div>
            <div class="row mt-2">
              <div class="col-6 text-start">
                <span class="grey_color fs-7">{{ article.author[:15] if article.author else 'News Desk' }}</span>
              </div>
              <div class="col-6 text-end">
                <a href="{{ article.url }}" target="_blank" class="card-link small">Article link</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
      {% else %}
      <div class="col-12">
        <p class="text-muted">Loading breaking news...</p>
      </div>
      {% endif %}
    </div>
  </div>

</div>

<div class="container mt-5 featured_news_section">
  <div>
    <span class="sub_heading fw-bold">Featured News</span>
  </div>

  <div class="text-center mt-5">
    <div class="row justify-content-md-center">
      {% if featured_news %}
      {% for article in featured_news %}
      <div class="col-6">
        <div class="card h-100">
          <img
            src="{{ article.urlToImage if article.urlToImage else '/assests/images/featured-new-' ~ loop.index ~ '.png' }}"
            class="card-img-top" alt="{{ article.title }}" style="height: 350px; object-fit: cover;">
          <div class="card-body">
            <div class="row mt-1 mb-2">
              <div class="col-6 text-start">
                <span class="grey_color fs-7">{{ article.publishedAt[:10] }}</span>
              </div>
              <div class="col-6 text-start fw-semibold">
                <span class="fs-7">{{ article.source.name }}</span>
              </div>
            </div>
            <div class="text-start">
              <h5 class="fw-bold">{{ article.title }}</h5>
              <p class="card-text">{{ article.description[:200] }}...</p>
            </div>
            <div class="row mt-2">
              <div class="col-6 text-start">
                <span class="grey_color fs-7">{{ article.author if article.author else 'News Desk' }}</span>
              </div>
              <div class="col-6 text-end">
                <a href="{{ article.url }}" target="_blank" class="card-link">Article link</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
      {% else %}
      <div class="col-12">
        <p class="text-muted">Loading featured news from Pakistan...</p>
      </div>
      {% endif %}
    </div>
  </div>

</div>

{% endblock body %}